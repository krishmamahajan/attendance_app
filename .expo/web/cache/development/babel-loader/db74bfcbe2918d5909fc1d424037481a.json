{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Krishma_other_pc\\\\react-native_attendance_app\\\\App\\\\Screens\\\\Auth\\\\Login.jsx\";\nimport React, { useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport { Button, TextInput } from \"react-native-paper\";\nimport { JSHash, CONSTANTS } from \"react-native-hash\";\nimport axios from \"axios\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nexport default function Login(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUername = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  useFocusEffect(React.useCallback(function () {\n    AsyncStorage.getItem(\"token\").then(function (x) {\n      if (x !== null) {\n        axios.post(\"http://krishma.webcodice.com/react-native/axios.php\", {\n          request: 20,\n          token: x\n        }).then(function (response) {\n          if (response.data == \"User not valid\") {\n            alert(response.data);\n          } else {\n            AsyncStorage.setItem(\"token\", x);\n            AsyncStorage.setItem(\"role\", response.data[\"0\"].role);\n\n            if (response.data[\"0\"].role == \"teacher\") {\n              AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n              navigation.navigate(\"Teacher\");\n            } else if (response.data[\"0\"].role == \"student\") {\n              AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n              navigation.navigate(\"Student\");\n            } else if (response.data[\"0\"].role == \"admin\") {\n              AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n              navigation.navigate(\"Admin\");\n            }\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }).catch(function (err) {\n      return console.log(err);\n    });\n    return function () {};\n  }, []));\n\n  var handleSubmit = function handleSubmit() {\n    if (username == \"\") {\n      alert(\"Please Enter Name.\");\n    } else if (password == \"\") {\n      alert(\"Please Enter Password.\");\n    } else if (username == \"\" || password == \"\") {\n      alert(\"All fields are required to fill.\");\n    } else if (username != \"\" || password != \"\") {\n      JSHash(password, CONSTANTS.HashAlgorithms.sha256).then(function (hash) {\n        axios.post(\"http://krishma.webcodice.com/react-native/axios.php\", {\n          request: 6,\n          username: username,\n          password: password,\n          token: hash\n        }).then(function (response) {\n          if (response.data == \"User not valid\") {\n            alert(response.data);\n          } else {\n            AsyncStorage.setItem(\"token\", hash);\n            AsyncStorage.setItem(\"role\", response.data[\"0\"].role);\n\n            if (response.data[\"0\"].role == \"teacher\") {\n              AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n              navigation.navigate(\"Teacher\");\n            } else if (response.data[\"0\"].role == \"student\") {\n              AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n              navigation.navigate(\"Student\");\n            } else if (response.data[\"0\"].role == \"admin\") {\n              AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n              navigation.navigate(\"Admin\");\n            }\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    }\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.welcome,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, \"Login \"), React.createElement(TextInput, {\n    style: styles.inputstyle,\n    label: \"Username\",\n    mode: \"outlined\",\n    secureTextEntry: false,\n    theme: mytheme,\n    onChangeText: function onChangeText(text) {\n      return setUername(text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }), React.createElement(TextInput, {\n    style: styles.inputstyle,\n    label: \"Password\",\n    mode: \"outlined\",\n    secureTextEntry: true,\n    theme: mytheme,\n    onChangeText: function onChangeText(text) {\n      return setPassword(text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }\n  }), React.createElement(Button, {\n    mode: \"contained\",\n    style: styles.inputstyle,\n    theme: mytheme,\n    onPress: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, \"Log In\"));\n}\nvar mytheme = {\n  colors: {\n    primary: \"#05c5f5\"\n  }\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    backgroundColor: \"#f0f8ff\"\n  },\n  mytext: {\n    fontSize: 18,\n    textAlign: \"center\",\n    margin: 5\n  },\n  inputstyle: {\n    margin: 5\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: \"center\",\n    margin: 10\n  }\n});","map":{"version":3,"sources":["D:/Krishma_other_pc/react-native_attendance_app/App/Screens/Auth/Login.jsx"],"names":["React","useState","Button","TextInput","JSHash","CONSTANTS","axios","useFocusEffect","Login","navigation","username","setUername","password","setPassword","useCallback","AsyncStorage","getItem","then","x","post","request","token","response","data","alert","setItem","role","navigate","catch","error","console","log","err","handleSubmit","HashAlgorithms","sha256","hash","e","styles","container","welcome","inputstyle","mytheme","text","colors","primary","StyleSheet","create","flex","justifyContent","backgroundColor","mytext","fontSize","textAlign","margin"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { StyleSheet, Text, View, AsyncStorage } from \"react-native\";\nimport { Button, TextInput } from \"react-native-paper\";\nimport { JSHash, CONSTANTS } from \"react-native-hash\";\nimport axios from \"axios\";\nimport { useFocusEffect } from \"@react-navigation/native\";\n\nexport default function Login({ navigation }) {\n  const [username, setUername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  useFocusEffect(\n    React.useCallback(() => {\n      AsyncStorage.getItem(\"token\")\n        .then((x) => {\n          if (x !== null) {\n            axios\n              .post(\"http://krishma.webcodice.com/react-native/axios.php\", {\n                request: 20,\n                token: x,\n              })\n              .then((response) => {\n                if (response.data == \"User not valid\") {\n                  alert(response.data);\n                } else {\n                  AsyncStorage.setItem(\"token\", x);\n                  AsyncStorage.setItem(\"role\", response.data[\"0\"].role);\n                  if (response.data[\"0\"].role == \"teacher\") {\n                    AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n                    navigation.navigate(\"Teacher\");\n                  } else if (response.data[\"0\"].role == \"student\") {\n                    AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n                    navigation.navigate(\"Student\");\n                  } else if (response.data[\"0\"].role == \"admin\") {\n                    AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n                    navigation.navigate(\"Admin\");\n                  }\n                }\n              })\n              .catch(function (error) {\n                console.log(error);\n              });\n          }\n        })\n        .catch((err) => console.log(err));\n      return () => {};\n    }, [])\n  );\n  const handleSubmit = () => {\n    if (username == \"\") {\n      alert(\"Please Enter Name.\");\n    } else if (password == \"\") {\n      alert(\"Please Enter Password.\");\n    } else if (username == \"\" || password == \"\") {\n      alert(\"All fields are required to fill.\");\n    } else if (username != \"\" || password != \"\") {\n      JSHash(password, CONSTANTS.HashAlgorithms.sha256)\n        .then((hash) => {\n          axios\n            .post(\"http://krishma.webcodice.com/react-native/axios.php\", {\n              request: 6,\n              username: username,\n              password: password,\n              token: hash,\n            })\n            .then((response) => {\n              if (response.data == \"User not valid\") {\n                alert(response.data);\n              } else {\n                AsyncStorage.setItem(\"token\", hash);\n                AsyncStorage.setItem(\"role\", response.data[\"0\"].role);\n                if (response.data[\"0\"].role == \"teacher\") {\n                  AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n                  navigation.navigate(\"Teacher\");\n                } else if (response.data[\"0\"].role == \"student\") {\n                  AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n                  navigation.navigate(\"Student\");\n                } else if (response.data[\"0\"].role == \"admin\") {\n                  AsyncStorage.setItem(\"user\", response.data[\"0\"].username);\n                  navigation.navigate(\"Admin\");\n                }\n              }\n            })\n            .catch(function (error) {\n              console.log(error);\n            });\n        })\n        .catch((e) => console.log(e));\n    }\n  };\n  return (\n    <View style={styles.container}>\n      <Text style={styles.welcome}>Login </Text>\n      <TextInput\n        style={styles.inputstyle}\n        label=\"Username\"\n        mode=\"outlined\"\n        secureTextEntry={false}\n        theme={mytheme}\n        onChangeText={(text) => setUername(text)}\n      />\n\n      <TextInput\n        style={styles.inputstyle}\n        label=\"Password\"\n        mode=\"outlined\"\n        secureTextEntry={true}\n        theme={mytheme}\n        onChangeText={(text) => setPassword(text)}\n      />\n\n      <Button\n        mode=\"contained\"\n        style={styles.inputstyle}\n        theme={mytheme}\n        onPress={handleSubmit}\n      >\n        Log In\n      </Button>\n    </View>\n  );\n}\nconst mytheme = {\n  colors: {\n    primary: \"#05c5f5\",\n  },\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    backgroundColor: \"#f0f8ff\",\n  },\n  mytext: {\n    fontSize: 18,\n    textAlign: \"center\",\n    margin: 5,\n  },\n  inputstyle: {\n    margin: 5,\n  },\n  welcome: {\n    fontSize: 20,\n    textAlign: \"center\",\n    margin: 10,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}